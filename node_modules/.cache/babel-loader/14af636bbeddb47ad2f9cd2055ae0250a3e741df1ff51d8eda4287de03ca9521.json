{"ast":null,"code":"var _jsxFileName = \"C:\\\\SihApplication\\\\civic issue appp\\\\civic-issue-app\\\\src\\\\context\\\\AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/React.createContext(undefined);\nconst STORAGE_KEY = 'auth_state';\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [state, setState] = React.useState(() => {\n    try {\n      const raw = localStorage.getItem(STORAGE_KEY);\n      if (!raw) return {\n        token: null,\n        role: null,\n        username: null\n      };\n      return JSON.parse(raw);\n    } catch {\n      return {\n        token: null,\n        role: null,\n        username: null\n      };\n    }\n  });\n  const login = data => {\n    var _data$username;\n    const next = {\n      token: data.token,\n      role: data.role,\n      username: (_data$username = data.username) !== null && _data$username !== void 0 ? _data$username : null\n    };\n    setState(next);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(next));\n  };\n  const logout = () => {\n    const next = {\n      token: null,\n      role: null,\n      username: null\n    };\n    setState(next);\n    localStorage.removeItem(STORAGE_KEY);\n  };\n  const value = {\n    ...state,\n    login,\n    logout\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 10\n  }, this);\n};\n_s(AuthProvider, \"Z2dcyrsF/txZe5Wh4VChDSkTMzo=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const ctx = React.useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used within AuthProvider');\n  return ctx;\n};\n_s2(useAuth, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","AuthContext","createContext","undefined","STORAGE_KEY","AuthProvider","children","_s","state","setState","useState","raw","localStorage","getItem","token","role","username","JSON","parse","login","data","_data$username","next","setItem","stringify","logout","removeItem","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","ctx","useContext","Error","$RefreshReg$"],"sources":["C:/SihApplication/civic issue appp/civic-issue-app/src/context/AuthContext.tsx"],"sourcesContent":["import React from 'react';\r\nimport { AuthRole } from '../types';\r\n\r\ninterface AuthState {\r\n  token: string | null;\r\n  role: AuthRole | null;\r\n  username: string | null;\r\n}\r\n\r\ninterface AuthContextType extends AuthState {\r\n  login: (data: { token: string; role: AuthRole; username?: string | null }) => void;\r\n  logout: () => void;\r\n}\r\n\r\nconst AuthContext = React.createContext<AuthContextType | undefined>(undefined);\r\n\r\nconst STORAGE_KEY = 'auth_state';\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [state, setState] = React.useState<AuthState>(() => {\r\n    try {\r\n      const raw = localStorage.getItem(STORAGE_KEY);\r\n      if (!raw) return { token: null, role: null, username: null };\r\n      return JSON.parse(raw);\r\n    } catch {\r\n      return { token: null, role: null, username: null };\r\n    }\r\n  });\r\n\r\n  const login = (data: { token: string; role: AuthRole; username?: string | null }) => {\r\n    const next: AuthState = { token: data.token, role: data.role, username: data.username ?? null };\r\n    setState(next);\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(next));\r\n  };\r\n\r\n  const logout = () => {\r\n    const next: AuthState = { token: null, role: null, username: null };\r\n    setState(next);\r\n    localStorage.removeItem(STORAGE_KEY);\r\n  };\r\n\r\n  const value: AuthContextType = { ...state, login, logout };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport const useAuth = (): AuthContextType => {\r\n  const ctx = React.useContext(AuthContext);\r\n  if (!ctx) throw new Error('useAuth must be used within AuthProvider');\r\n  return ctx;\r\n};\r\n\r\n\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAc1B,MAAMC,WAAW,gBAAGH,KAAK,CAACI,aAAa,CAA8BC,SAAS,CAAC;AAE/E,MAAMC,WAAW,GAAG,YAAY;AAEhC,OAAO,MAAMC,YAAqD,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACrF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGX,KAAK,CAACY,QAAQ,CAAY,MAAM;IACxD,IAAI;MACF,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAO,CAACT,WAAW,CAAC;MAC7C,IAAI,CAACO,GAAG,EAAE,OAAO;QAAEG,KAAK,EAAE,IAAI;QAAEC,IAAI,EAAE,IAAI;QAAEC,QAAQ,EAAE;MAAK,CAAC;MAC5D,OAAOC,IAAI,CAACC,KAAK,CAACP,GAAG,CAAC;IACxB,CAAC,CAAC,MAAM;MACN,OAAO;QAAEG,KAAK,EAAE,IAAI;QAAEC,IAAI,EAAE,IAAI;QAAEC,QAAQ,EAAE;MAAK,CAAC;IACpD;EACF,CAAC,CAAC;EAEF,MAAMG,KAAK,GAAIC,IAAiE,IAAK;IAAA,IAAAC,cAAA;IACnF,MAAMC,IAAe,GAAG;MAAER,KAAK,EAAEM,IAAI,CAACN,KAAK;MAAEC,IAAI,EAAEK,IAAI,CAACL,IAAI;MAAEC,QAAQ,GAAAK,cAAA,GAAED,IAAI,CAACJ,QAAQ,cAAAK,cAAA,cAAAA,cAAA,GAAI;IAAK,CAAC;IAC/FZ,QAAQ,CAACa,IAAI,CAAC;IACdV,YAAY,CAACW,OAAO,CAACnB,WAAW,EAAEa,IAAI,CAACO,SAAS,CAACF,IAAI,CAAC,CAAC;EACzD,CAAC;EAED,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACnB,MAAMH,IAAe,GAAG;MAAER,KAAK,EAAE,IAAI;MAAEC,IAAI,EAAE,IAAI;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACnEP,QAAQ,CAACa,IAAI,CAAC;IACdV,YAAY,CAACc,UAAU,CAACtB,WAAW,CAAC;EACtC,CAAC;EAED,MAAMuB,KAAsB,GAAG;IAAE,GAAGnB,KAAK;IAAEW,KAAK;IAAEM;EAAO,CAAC;EAE1D,oBAAOzB,OAAA,CAACC,WAAW,CAAC2B,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAArB,QAAA,EAAEA;EAAQ;IAAAuB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAuB,CAAC;AAC9E,CAAC;AAACzB,EAAA,CA1BWF,YAAqD;AAAA4B,EAAA,GAArD5B,YAAqD;AA4BlE,OAAO,MAAM6B,OAAO,GAAGA,CAAA,KAAuB;EAAAC,GAAA;EAC5C,MAAMC,GAAG,GAAGtC,KAAK,CAACuC,UAAU,CAACpC,WAAW,CAAC;EACzC,IAAI,CAACmC,GAAG,EAAE,MAAM,IAAIE,KAAK,CAAC,0CAA0C,CAAC;EACrE,OAAOF,GAAG;AACZ,CAAC;AAACD,GAAA,CAJWD,OAAO;AAAA,IAAAD,EAAA;AAAAM,YAAA,CAAAN,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}